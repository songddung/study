# 물리 계층과 데이터 링크 계층

## 키워드
- 이더넷 : 다양한 통신 매체의 규격들, 송수신되는 프레임의 형태와 프레임을 주고 받는 방법등을 정의한 네트워크 기술
- IEEE 802.3 : 이더넷 관련 표준 규격들의 집합
- 이더넷 프레임 : 프리엠블, 수신,송신 MAC주소, 타입/길이, 데이터, FCS로 구성
- MAC 주소 : 네트워크 인터페이스마다 부여되는 물리적 주소


- NIC : 호스트와 통신 매체 사이의 인터페이스 역할을 담당하는 네트워크 장비
- 트위스티드 페어 케이블 : 구리선을 통해 전기 신호를 주고 받는 유선 통신 매체
  - 브레이드 실드 혹은 포일 실드로 감싸 노이즈로부터 구리 선 보호
- 광섬유 케이블 : 광섬유를 통해 광신호를 주고 받는 유선 통신 매체
  - 코어의 지름에 따라 싱글 모드, 멀티 모드로 나뉨


- 허브 : 여러 대의 호스트를 연결할 수 있는 물리 계층의 장비, 반이중 모드로 통신
- 반이중 모드 : 데이터를 한번에 한 방향으로만 전송할 수 있는 통신 방식
- 콜리전 도메인 : 충돌 발생 가능성이 있는 영역(허브에 연결된 호스트 전체)
- CSMA/CD : 반이중 이더넷 네트워크의 충돌 방지 프로토콜


### 이더넷
- 이더넷 : 현대 LAN, 특히 유선 LAN 환경에서 가장 대중적으로 사용되는 기술
  - 다양한 통신 매체의 규격들과 송수신되는 프레임의 형태, 프레임을 주고받는 방법 등이 정의된 네트워크 기술

- 이더넷 표준
  - IEEE 802.3

- 통신 매체 표기 형태 (전송 속도BASE-추가 특성)
  - 전송 속도
    - 숫자만 표기된 경우 : Mbps 속도
    - 숫자뒤에 G가 붙는 경우 : Gbps
  - BASE
    - 베이스밴드의 약자
    - 변조 타입을 의미
  - 추가 특성
    - 통신 매체의 특성을 명시
      - 전송가능한 최대거리나 물리 계층 인코딩 방식, 레인 수 등이 명시될 수 있음
  
- 통신 매체 종류
  - 추가 특성 C, T, S, L
    - C : 동축 케이블
    - T : 트위스티드 페어 케이플
    - S : 단파장 빛을 활용하는 광섬유 케이블
    - L : 장파장 빛을 활용하는 광섬유 케이블

- 이더넷 프레임
  - 현대 유선 LAN 환경은 대부분 이더넷을 기반으로 구성되어 호스트가 데이터 링크 계층에서 주고받는 프레임
    형식도 정해져 있음
  - 즉, 이더넷 네트워크에서 주고받는 프레임인 이더넷 프레임 형식은 정해져 있음
  
  - 상위 계층으로부터 받아들인 정보에 헤더와 트레일러를 추가하는 캡슐화 과정을 통해 만들어짐
  - 수신지 입장에선 역으로 역캡슐화 과정을 거침
  - 이더넷 프레임 헤더의 기본 구성
    - 프리엠블
      - 이더넷 프레임의 시작을 알리는 8바이트 크기의 정보
        - 첫 7바이트 : 10101010
        - 마지막 바이트 : 10101011
    - MAC 주소 : 네트워크 인터페이스마다 부여되는 6바이트 길이의 주소
      - 일반적으로 고유하며 변경되지 않는 주소로 인터페이스 마다 부여
        - *반드시 고유하지 않으며 주소 변경이 가능하다*
      - 수신지와 송신지 특정
      - 수신지 MAC 주소
      - 송신지 MAC 주소
    - 타입/길이
      - 타입/길이 필드에는 타입과 길이가 올 수 있음
      - 필드에 명시된 크기가 1500(16진수) 이하일 경우 프레임의 크기(길이)를 나타내는데 사용
      - 1536(16진수)이상일 경우 타입을 나타내는데 사용
      - 타입 : 이더넷 프레임이 어떤 정보를 캡슐화했는지 나타내는 정보
        - 이더타입이라고도 부름
        - 대표적으로 상위계층에서 사용된 프로토콜의 이름이 명시됨

  - 페이로드 구성
    - 데이터
      - 상위 계층에서 전달받거나 전달해야 할 내용
      - 네트워크 계층의 데이터와 헤더를 합친 PDU가 이곳에 보관됨
      - 최대 크기 1500바이트
      - 반드시 일정한 크기(46바이트 이상)
      - 그 이하의 데이터라면 크기를 맞추기 위해 나머지 공간을 0으로 채움 (패딩)
  - 트레일러 구성
    - FCS
      - 수신한 이더넷 프레임에 오류가 있는지 확인하기 위한 필드
      - CRC : 순환 중복 검사라고 불리는 오류 검출용 값
      - 송신지는 프리엠블을 제외한 나머지 필드 값들을 바탕으로 CRC값 계산 후,
      - 이 값을 FCS필드에 명시
      - 수신지에서는 수신한 프레임에서 프리엠블과 FCS 필드를 제외한 나머지 필드값으로 CRC 값 계산한 뒤
        이 값을 FCS 필드 값과 비교 일치하지 않으면 프레임에 오류가 있다고 판단하고 폐기함

- 토큰 링
  - 토큰 링 네트워크에서는 호스트들이 링 형태로 연결됨
  - 호스트끼리 돌아가며 토큰이라는 정보를 주고받으며, 
      네트워크 내 다른 호스트에게 메시지 송신 시 반드시 이 토큰이 필요

### NIC와 케이블
- NIC : 호스트와 통신 매체를 연결하고, MAC 주소가 부여되는 네트워크 장비
  - 통신매체에 흐르는 신호를 호스트가 이해하는 프레임으로 변환하거나,
    호스트가 이해하는 프레임을 통신 매체에 흐르는 신호로 변환
  - 네트워크와의 연결점을 담당한다는 점에서 네트워크 인터페이스 역할을 수행
  
- 케이블 : NIC에 연결되는 물리 계층의 유선 통신 매체
  - 트위스티드 페어 케이블
    - 구리 선으로 전기 신호를 주고 받는 통신 매체
    - 케이블 본체와 연결부인 커넥터로 이루어짐
    - RJ-45 : 트위스티드 페어 케이블에서 주로 활용되는 케이블
    - 구리 선으로 이루어져 전자적 간섭이 발생할 수 있는데, 이것을 노이즈라고 부름
    - 차폐 : 주변을 감싸 노이즈를 감소시키는 방식
    - 차폐에 사용된 그물 모양의 철사와 포일을 브레이드 실드 혹은 포일 실드라고 말함
      - STP : 브레이드 실드로 구리선을 감싸 노이즈를 감소 시킨 트위스티드 페어 케이블
      - FTP : 포일 실드로 ''
        - S/FTP : 외부는 브레이드 실드, 내부의 구리선은 포일 실드로 감쌈
        - F/FTP : 외부와 내부 모두 포일 실드로 감쌈
        - SF/FTP : 외부는 브레이드 실드와 포일 실드, 내부의 구리 선은 포일 실드로 감쌈
        - U/UTP : 아무것도 감싸지 않은 케이블
      - UTP : 아무것도 감싸지 않고 구리 선만 있는 케이블
      
  - 광섬유 케이블
    - 광섬유 케이블 : 빛(광신호)을 이용해 정보를 주고 받는 케이블
      - 속도도 빠르고, 먼 거리까지 전송가능
      - 노이즈 간섭으로 받는 영향이 적음
      - 종류
        - LC 커넥터
        - SC 커넥터
        - FC 커넥터
        - ST 커넥터
      - 광섬유 구조
        - 코어 : 광섬유에서 실질적으로 빛이 흐르는 부분
        - 클래딩 : 코어를 둘러싸 빛을 코어 안에서 흐르게 함
      - 지름에 따라
        - 싱글 모드 광섬유 케이블
          - 지름 : 8~10 나노미터
          - 신호 손실 적음
          - 비쌈
          - 장파장 사용
        - 멀티 모드 광섬유 케이블
          - 지름 : 50 ~ 62.5 나노미터
          - 신호 손실이 싱글 모드보다 큼
          - 장거리 부적합
          - 단파장 사용
          

### 허브
- 통신 매체를 통해 송수신되는 메시지는 다른 호스트에게 전달되는 과정에서 네트워크 장비를 거침
  - 물리 계층 : 허브
  - 데이터 링크 계층 : 스위치

- 주소 개념이 없는 물리 계층
  - 송수신지를 특정할 수 있는 주소는 데이터 링크 계층부터 존재하는 개념
  - 물리 계층에서는 통신 매체 간의 연결과 통신 매체상의 송수신만 이루어짐
  - 데이터 링크 계층에서는 주소 개념이 존재
    - MAC 주소

- 물리 계층의 허브는 여러 대의 호스트를 연결하는 장치
- 리피터 허브라고도 부름
- 이더넷 네트워크의 허브는 이더넷 허브라고 부름

- 허브의 구조
  - 포트 : 커넥터를 연결하는 연결 지점

- 허브의 특징
  - 전달받은 신호를 다른 모든 포트로 그대로 내보냄
  - 반이중 모드로 통신
    - 1차선 도로의 형태로 송수신을 번갈아가며 통신
    - 반대 : 전이중
- 콜리전 도메인
  - 동시에 허브에 신호를 보낼 경우 충돌(콜리전)발생
  - 콜리전 도메인 : 충돌이 발생할 수 있는 영역

- CSMA/CD
  - 허브에서의 충돌 원인은 반이중 모드로 통신하기 때문
  - 이러한 충돌 문제를 해결하기 위한 프로토콜 : CSMA/CD
  
  - CSMA/CD 프로토콜을 사용하는 반이중 이더넷 네트워크에서는 메시지를 보내기 전 현재 네트워크상에 전송 중인 것이 있는지 확인
    - CS : 캐리어 감지
      - 캐리어 감지 : 현재 통신 매체의 사용 가능 여부를 검사함
    
    - MA : 다중 접근
      - 캐리어 감지에도 두 개 이상의 호스트가 부득이하게 동시 사용을 하려 할때도 있음
      - 다중 접근 : 복수의 호스트가 네트워크에 접근하려는 상황
    
    - CD : 충돌 검출
      - 충돌 검출 : 충돌이 발생하면 이를 검출
      