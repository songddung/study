# CHAPTER 5

## 키워드
- 도메인 네임 : IP 주소와 대응되는 문자열 형태의 호스트 특정 정보, 네임 서버가 관리
- DNS : 계층적이고 분산된 도메인 네임에 대한 관리 체계이자 관리하는 프로토콜
- DNS 캐시 : TTL동안 도메인 네임의 질의 결과를 임시 저장
- 자원 : 네트워크상의 메시지를 통해 송수신하고자 하는 대상
- URI : 자원을 식별할 수 있는 정보
- URL : scheme, authority, path, query, fragment 로 구성 

- HTTP  
  - 요청-응답 기반 프로토콜
  - 미디어 독립적
  - 상태 유지x
  - 지속 연결 기능 제공
- HTTP 메시지 구조
  - 시작 라인
  - 필드 라인
  - 본문
  - 요청 라인에는 메서드, 응답 라인에는 상태 코드 명시

- HTTP 헤더
  - 요청 메세지에서 주로 활용되는 헤더
  - 응답 메시지에서 주로 활용되는 헤더
  - 요청, 응답 메시지 모두에서 자주 활용되는 헤더
- 캐시 : 대역폭 낭비, 응답 지연을 방지하기 위해 사본을 임시저장
- 쿠키 : 클라이언트의 상태를 알 수 있는 정보, 서버에서 생성, 클라이언트에 의해 저장
- 콘텐츠 협상 ; 같은 URI에 대해 가장 적합한 자원의 표현을 제공해 주는 메커니즘



## 응용 계층

### DNS와 자원
- 메시지를 주고받고자 하는 대상을 파악하기 위해서는 IP주소 이외에도 도메인 네임을 사용할 수 있음
- 송수신하고자 하는 정보를 식별하기 위한 방법
  - 위치 기반의 식별자 : URL
  - 이름 기반의 식별자 : URN

### 도메인 네임과 서버 네임
- 도메인 네임 : 호스트의 IP주소와 대응되는 문자열 형태의 호스트 특정 정보
- 도메인 네임과 IP 주소는 네임서버에서 관리
- DNS 서버 : 도메인 네임을 관리하는 네임 서버
  - DNS(도메인 네임 시스템) : 계층적이고 분산된 도메인 네임에 대한 관리 체계
  
- 도메인 네임은 (.)을 기준으로 계층적으로 분류
  - 예시 : www.ggalng.me. 
  - 최상단 : 루트 도메인, 생략 가능 , 마지막 (.)
  - 최상위 도메인 : me
  - 2단계 도메인 : ggalong
  - 3단계 도메인 : www => 호스트 네임으로 부르기도 함
  - 전체 주소 도메인 네임 : 전체 도메인 네임을 포함하는 도메인 네임 > www.ggalng.me.

### 계층적 네임 서버
- 리졸빙(도메인 네임을 풀이) : IP주소를 모르는 상태에서 도메인 네임에 대응되는 IP주소르 알아내는 과정
- 로컬 네임 서버
  - 클라이언트와 맞닿아 있는 네임 서버
  - 클라이언트가 도메인 네임을 통해 IP 주소를 알아내고자 할때 가장 먼저 찾게 되는 네임 서버
  - 일반적으로 로컬 네임 서버는 ISP가 할당해주는 경우가 많음
  - 로컬 네임 서버 주소가 아닌 공개 DNS 서버를 이용할 수도 있음

- 로컬 네임 서버가 대응 되는 IP주소를 모를때
  - 루트 네임 서버에게 해당 도메인 네임을 질의
  - 루트 네임 서버 : 루트 도메인을 관장하는 네임 서버
    - TLD 네임 서버의 IP 주소를 반환
    - TLD 네임 서버 : TLD를 관리하는 네임 서버
    
- 책임 네임 서버
  - 특정 도메인 영역을 관리하는 네임 서버

- 재귀적 질의
  - 질의 : 클라이언트 > 로컬 네임 서버 > 루트 네임 서버 > TLD 네임 서버 > 책임 네임 서버 > 호스트
  - 응답 : 호스트 > 책임 네임서버 > TLD > 루트 > 로컬 > 클라이언트

- 반복적 질의
  - 클라이언트 <-> 로컬 네임 <-> 루트 
  -                     <-> TLD
  -                     <-> 책임

- DNS 캐시 : 네임 서버들이 기존에 응답받은 결과를 임시로 저장, 추후에 같은 질의 시 이를 활용
  - 임시 저장된 값은 TTL이라는 값과 함께 저장, 캐시될 수 있는 시간을 뜻함

### 자원을 식별하는 URI
- 자원 : 네트워크상의 메시지를 주고 받는 대상
- URI : 송수신하고자 하는 정보를 식별하기 위한 방식
  - 식별 정보 기준으로 분류한 개념
    - URL : 위치를 이용해 자원 식별
      - 구조
        - scheme
        - authority : 호스트 인식
        - path : 자원이 위치한 경로
        - query : 쿼리 = key - value형태로 사용
        - fragment : 자원의 한조각을 가리키기 위한 정보
    - URN : 이름을 이용해 자원 식별
      - 자원의 고유한 이름을 사용하여 식별하기 때문에 자원의 위치와 상관없이 식별할 수 있음

### DNS 레코드 타입
- DNS 자원 레코드 : IP와 도메인 네임을 대응


### HTTP
- HTTP의 특성
  - HTTP : 응용 계층에서 정보를 주고받는 데 사용되는 프로토콜
  - 요청-응답 기반 프로토콜
  - 미디어 독립적 프로토콜
    - http에서 메시지로 주고 받는 자원의 종류 : 미디어 타입(MIME 타입)
      - 미디어 타입 형식 : 타입/서브타입
        - 타입 : 데이터의 유형
        - 서브타입 : 세부 유형
  - 스테이트리스 프로토콜
    - http는 상태를 유지하지 않음 > 상태를 기억하지 않음
    - http가 처음 만들어 졌을때부터 지금까지 이어지는 중요한 설계 목표 : 확장성, 견고성 
  - 지속 연결 프로토콜
    - 지속 연결(킵 얼라이브) : 하나의 TCP 연결상에서 여러 개의 요청-응답을 주고받을 수 있는 기술


### HTTP 메시지 구조
- 시작 라인
  - 요청 라인
    - 메서드 : GET, POST, PUT, DELETE 
    - 요청 대상 : 요청을 보낼 서버의 자원
    - HTTP 버전 : 버전
  - 상태 라인
    - 버전
    - 상태 코드
    - 이유
- 필드 라인
  - 헤더 이름 : 헤더 값


### HTTP 상태 코드
- 100 번대 : 정보성 상태
- 200 번대 : 성공 상태
- 300 번대 : 리다이렉션 상태
- 400     : 클라이언트 에러 상태
- 500     : 서버 에러 상태


### HTTP의 발전
- 0.9
  - 지금은 거의 사용x
  - 초창기 버전
  - get매핑뿐
  
- 1.0
  - HEAD, POST메서드 도입
  - 지속 연결 지원x
  
- 1.1
  - 지속 연결 지원
  - 오늘날까지 널리 사용

- 2.0
  - 1.1의 효율과 성능을 높이기 위한 버전
  - 헤더를 압축하여 전송
  - 바이너리 데이터 기반의 메시지를 송수신
  - 클라이언트 요청x 이어도 미래에 필요할 것으로 예상되는 자원을 미리 전송해 주는 서버 푸시 기능 제공

- 3.0
  - UDP 기반으로 구현된 QUIC 프로토콜을 기반으로 동작
  - 속도측면에서 큰 개선
  - 중요성 점차 커지는 중


### HTTP 헤더와 HTTP 기반 기술

### HTTP 헤더
- 주로 활용되는 대표적인 헤더
  - Host
    - 요청을 보낼 호스트를 나태냄
    - 주로 도메인 네임을 명시
    - 포트 번호가 포함되어 있을 수 있음
  - User-Agent
    - 유저 에이전트 : HTTP 요청을 시작하는 클라이언트 측의 프로그램 (ex 웹 브라우저)
      - 운영체제
      - 브라우저 종류 및 버전
      - 렌더링 엔진등
  - Referer
    - 개발 시 아주 유용한 데이터
    - 클라이언트가 요청을 보낼때 머무르고 있던 URL
    - 원래 Referrer이 맞는데 처음에 오타내서 지금까지 Referer로 사용
  - Authorization
    - 클라이언트의 인증 정보를 담는 헤더
      - 인증 타입과 인증을 위한 정보가 차례로 명시
      - 가장 기본적인 HTTP 인증 타입 : Basic
        - Basic : Base64로 인코딩한 값을 인정 정보로 삼는 방식

- 응답 시 활용되는 HTTP 헤더
  - Server
    - 요청을 처리하는 서버 측의 소프트웨어와 관련된 정보 명시
  - Allow
    - 클라이언트에게 허용된 HTTP 메서드 목록을 알려 주기 위해 사용
  - Retry-After
    - 자원을 사용할 수 있는 시간이나 날짜
  - Location
    - 클라이언트에게 자원의 위치를 알려주기 위해 사용되는 헤더
  - WWW-Authenticate
    - 자원에 접근하기 위한 인증 방식을 설명하는 헤더

- 요청과 응답 모두에서 활용되는 HTTP 헤더
  - Date
    - 메시지가 생성된 날짜와 시각에 관련된 정보를 담은 헤더
  - Connection
    - 클라이언트의 요청과 응답 간의 연결 방식을 설정하는 헤더
  - Content-Length
    - 본문의 바이트 단위 크기(길이)
  - Content-Type, Content-Language, Content-Encoding
    - 본문의 표현 방식을 설명하는 헤더


### 캐시
- 불필요한 대역폭 낭비와 응답 지연을 방지하기 위해 정보의 사본을 임시로 저장하는 기술
- 개인 전용 캐시 : 웹 브라우저에 저장
- 공용 캐시 : 클라이언트와 서버 사이에 위치한 중간 서버에 저장

- 엔티티 태그
  - 자원의 버전을 식별하기 위한 정보
    - 버전 : 유의미한 변경 사항


### 쿠키
- 쿠키 : 서버에서 생성되어 클라이언트 측에 저장되는 데이터
    - HTTP의 상태리스 특성을 보완하기 위한 수단
- 쿠키의 한계
  - 보안
    - 쿠키 정보가 쉽게 노출되거나 조작될 수 있음
    - 이를 보완하기 위한 속성 
      - secure
        - HTTPS에서만 쿠키 전송
      - HttpOnly
        - HTTP 송수신을 통해서만 쿠키를 이용하도록 제한하는 속성
          - 자바스크립트에서 쿠기 접근 차단

### 콘텐츠 협상과 표현
- HTTP의 콘텐츠 협상
  - 같은 URI에 대해 가장 적합한 자원의 형태를 제공하는 매커니즘
  - 표현 : 송수신 가능한 자원의 형태